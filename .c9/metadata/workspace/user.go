{"changed":true,"filter":false,"title":"user.go","tooltip":"/user.go","value":"package hello\n\nimport (\n\t//\"time\"\n\t//\"strings\"\n\t//\"strconv\"\n\t\"log\"\n\t\"appengine\"\n\t\"appengine/datastore\"\n\t\"net/http\"\n\t\"encoding/json\"\n\t//\"html/template\"\n\t//\"github.com/gorilla/mux\"\n\t//\"gopkg.in/mgo.v2/bson\"\n\t)\n\ntype User struct {\n\tFirstName\tstring\t`json:\"firstname\"`\n\tLastName\tstring\t`json:\"lastname\"`\n\tAge\t\t\tstring\t`json:\"age\"`\n}\n\ntype Users struct {\n\tUserArray []User\n}\n\ntype UsersArray []User\n\nfunc userGetHandler(w http.ResponseWriter, r *http.Request) {\n\t//Test1 := User{\n\t//\tFirstName:\"George\",\n\t//\tLastName:\"T\",\n\t//\tAge:\"12\"}\n\n\t//Test2 := User{\n\t//\tFirstName:\"George\",\n\t//\tLastName:\"T\",\n\t//\tAge:\"13\"}\n\n\t//ArrayTest := []User{Test1,Test2}\n\t\n\t//log.Println(ArrayTest)\n\t\n\tAllUsers, err := usersFindAll(w, r)\n\n\tlog.Println(AllUsers)\n\n\tif err == nil {\n\t\tencoder := json.NewEncoder(w)\n\t\t\n\t\terr1 := encoder.Encode(&AllUsers)\n\t\tif err1 == nil {\n\t\t\tlog.Println(\"Returned users list\")\n\t\t} else {\n\t\t\tlog.Println(\"Unable to encode users JSON\", err1)\n\t\t}\n\t} else {\n\t\tlog.Println(\"Error retrieving users\", err)\n\t}\t\t\n\t\n\t\n}\n\nfunc userPostHandler(w http.ResponseWriter, r *http.Request) {\n\tdecoder := json.NewDecoder(r.Body)\n\t\n\tvar newUser User\n\terr1 := decoder.Decode(&newUser)\n\tif err1 == nil {\n\t\tnewUser.userSave(w, r)\n\t} else {\n\t\tlog.Println(\"Unable to decode the JSON request\", err1);\n\t}\n}\n\nfunc (p *User) userSave(w http.ResponseWriter, r *http.Request) {\n\tc := appengine.NewContext(r)\n\t\n\tkey := datastore.NewIncompleteKey(c, \"test\", nil)\n\n\tif _, err := datastore.Put(c, key, p); err != nil {\n\t\thttp.Error(w, err.Error(), 500)\n\t\treturn\n\t}\n\t\n\tdatastore.Get(c, key, p)\n\t\n\tlog.Println(\"Successfully save\", p.FirstName)\n}\n\nfunc usersFindAll(w http.ResponseWriter, r *http.Request) (UsersArray, error) {\n\tc := appengine.NewContext(r)\n\t\t\n\tq := datastore.NewQuery(\"test\")\n\t\t\n\tvar UsersResult []User\n\t\n\t_, err := q.GetAll(c, &UsersResult)\n\t\tif err != nil {\n\t\tlog.Println(\"Error retrieving datastore \", err)\n\t\treturn nil, err\n\t}\n\n\treturn UsersResult, nil\n}","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":26,"column":13},"end":{"row":26,"column":14},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":14},"end":{"row":26,"column":15},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":15},"end":{"row":26,"column":16},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"insert","lines":["["]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"insert","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":19},"end":{"row":26,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":20},"end":{"row":26,"column":21},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":21},"end":{"row":26,"column":22},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":18},"end":{"row":26,"column":22},"action":"remove","lines":["User"]},{"start":{"row":26,"column":18},"end":{"row":26,"column":22},"action":"insert","lines":["User"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":22},"end":{"row":27,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":19},"end":{"row":39,"column":20},"action":"remove","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":18},"end":{"row":39,"column":19},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":17},"end":{"row":39,"column":18},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":16},"end":{"row":39,"column":17},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":15},"end":{"row":39,"column":16},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":14},"end":{"row":39,"column":15},"action":"remove","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":18},"end":{"row":39,"column":19},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":14},"end":{"row":39,"column":25},"action":"remove","lines":["UsersArray:"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":33},"end":{"row":39,"column":34},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":1},"end":{"row":29,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":2},"end":{"row":29,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":0},"end":{"row":30,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":0},"end":{"row":30,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":1},"end":{"row":30,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":2},"end":{"row":30,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":1},"end":{"row":31,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":2},"end":{"row":31,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":1},"end":{"row":32,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":2},"end":{"row":32,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":1},"end":{"row":34,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":2},"end":{"row":34,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":1},"end":{"row":35,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":2},"end":{"row":35,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":1},"end":{"row":36,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":2},"end":{"row":36,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":1},"end":{"row":37,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":2},"end":{"row":37,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":1},"end":{"row":39,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":2},"end":{"row":39,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":1},"end":{"row":41,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":2},"end":{"row":41,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":2},"end":{"row":43,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":1},"end":{"row":43,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":1},"end":{"row":43,"column":2},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":1},"end":{"row":43,"column":2},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":90,"column":64},"end":{"row":90,"column":65},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":90,"column":65},"end":{"row":90,"column":66},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":90,"column":66},"end":{"row":90,"column":67},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":90,"column":67},"end":{"row":90,"column":68},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":90,"column":68},"end":{"row":90,"column":69},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":100,"column":9},"end":{"row":100,"column":29},"action":"remove","lines":["Users{UserArray:nil}"]},{"start":{"row":100,"column":9},"end":{"row":100,"column":10},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":100,"column":10},"end":{"row":100,"column":11},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":100,"column":11},"end":{"row":100,"column":12},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":13},"end":{"row":105,"column":14},"action":"insert","lines":["R"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":14},"end":{"row":105,"column":15},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":15},"end":{"row":105,"column":16},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":16},"end":{"row":105,"column":17},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":17},"end":{"row":105,"column":18},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":18},"end":{"row":105,"column":19},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":19},"end":{"row":105,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":19},"end":{"row":105,"column":20},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":102,"column":0},"end":{"row":104,"column":0},"action":"remove","lines":["","\tUsers := Users{UserArray:UsersResult}",""]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"insert","lines":["R"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"remove","lines":["R"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":5},"end":{"row":43,"column":6},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":4},"end":{"row":43,"column":5},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":3},"end":{"row":43,"column":4},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":2},"end":{"row":43,"column":3},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":1},"end":{"row":43,"column":2},"action":"remove","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":1},"end":{"row":43,"column":2},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":2},"end":{"row":43,"column":3},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":3},"end":{"row":43,"column":4},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":4},"end":{"row":43,"column":5},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":5},"end":{"row":43,"column":6},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":43,"column":8},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":8},"end":{"row":43,"column":9},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":2},"end":{"row":45,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":1},"end":{"row":45,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":2},"end":{"row":47,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":1},"end":{"row":47,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":13},"end":{"row":45,"column":14},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":13},"end":{"row":45,"column":14},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":14},"end":{"row":45,"column":15},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":15},"end":{"row":45,"column":16},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":16},"end":{"row":45,"column":17},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":26},"end":{"row":50,"column":35},"action":"remove","lines":["ArrayTest"]},{"start":{"row":50,"column":26},"end":{"row":50,"column":27},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":27},"end":{"row":50,"column":28},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":28},"end":{"row":50,"column":29},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":29},"end":{"row":50,"column":30},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":30},"end":{"row":50,"column":31},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":31},"end":{"row":50,"column":32},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":32},"end":{"row":50,"column":33},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":33},"end":{"row":50,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":2},"end":{"row":56,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":1},"end":{"row":56,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":2},"end":{"row":57,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":1},"end":{"row":57,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":2},"end":{"row":58,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":1},"end":{"row":58,"column":2},"action":"remove","lines":["/"]}]}]]},"ace":{"folds":[],"scrolltop":287,"scrollleft":0,"selection":{"start":{"row":61,"column":1},"end":{"row":61,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"start","mode":"ace/mode/golang"}},"timestamp":1418779507000}